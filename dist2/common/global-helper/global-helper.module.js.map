{"version":3,"sources":["sourceMap"],"names":["__decorate","_0x40647f","_0x104ed1","_0x2ecebb","_0xc3f05","_0x1c38e1","arguments","_0x491eca","Object","_0x48becd","Reflect","_0x1401a7","__importDefault","_0x31079c","exports","common_1","require","config_1","ioredis_1","nestjs_pino_1","prisma_module_1","global_1","global_helper_service_1","config_2","redisClient","_0x37fecc","GlobalHelperModule","_0x5455a8","_0x76af52","_0x190e03","_0x3cc697"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GlobalHelperModule = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst config_1 = require(\"@nestjs/config\");\nconst ioredis_1 = __importDefault(require(\"ioredis\"));\nconst nestjs_pino_1 = require(\"nestjs-pino\");\nconst prisma_module_1 = require(\"../prisma/prisma.module\");\nconst global_1 = require(\"../../types/global\");\nconst global_helper_service_1 = require(\"./global-helper.service\");\nconst config_2 = __importDefault(require(\"../../config/\"));\nconst redisClient = {\n    provide: global_1.REDIS_CLIENT,\n    imports: [config_1.ConfigModule],\n    useFactory: (config) => {\n        return new ioredis_1.default(config.get('env.redis'));\n    },\n    inject: [config_1.ConfigService],\n};\nlet GlobalHelperModule = class GlobalHelperModule {\n};\nexports.GlobalHelperModule = GlobalHelperModule;\nexports.GlobalHelperModule = GlobalHelperModule = __decorate([\n    (0, common_1.Global)(),\n    (0, common_1.Module)({\n        imports: [\n            config_1.ConfigModule.forRoot({ isGlobal: true, load: [config_2.default] }),\n            prisma_module_1.PrismaModule,\n            nestjs_pino_1.LoggerModule.forRootAsync({\n                imports: [config_1.ConfigModule],\n                inject: [config_1.ConfigService],\n                useFactory: (config) => {\n                    const isProduction = config.get('env.isProduction');\n                    if (isProduction) {\n                        return {\n                            pinoHttp: {\n                                serializers: {\n                                    req(req) {\n                                        req.body = req.raw.body;\n                                        return req;\n                                    },\n                                },\n                                transport: {\n                                    target: 'pino/file',\n                                    options: { destination: '/data/log/app.log', mkdir: true },\n                                },\n                            },\n                        };\n                    }\n                    return {\n                        pinoHttp: {\n                            serializers: {\n                                req(req) {\n                                    req.body = req.raw.body;\n                                    return req;\n                                },\n                            },\n                            transport: { target: 'pino-pretty' },\n                        },\n                    };\n                },\n            }),\n        ],\n        providers: [redisClient, global_helper_service_1.GlobalHelperService],\n        exports: [redisClient],\n    })\n], GlobalHelperModule);\n//# sourceMappingURL=global-helper.module.js.map"]}