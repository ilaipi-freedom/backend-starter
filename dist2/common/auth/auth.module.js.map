{"version":3,"sources":["sourceMap"],"names":["__decorate","_0x4ac306","_0x115be8","_0x2f582c","_0x58416b","_0x3fcc1a","arguments","_0x275b7a","Object","_0xe634f7","Reflect","_0xe98627","exports","common_1","require","config_1","jwt_1","auth_controller_1","auth_guard_1","auth_service_1","jwt_strategy_1","cache_module_1","JWT_SECRET","_0x3a0dbe","_0x36d045","AuthModule","_0x2d6aa1","_0x218c8d","_0x593ebb","_0x8ec70c"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AuthModule = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst config_1 = require(\"@nestjs/config\");\nconst jwt_1 = require(\"@nestjs/jwt\");\nconst auth_controller_1 = require(\"./auth.controller\");\nconst auth_guard_1 = require(\"./auth.guard\");\nconst auth_service_1 = require(\"./auth.service\");\nconst jwt_strategy_1 = require(\"./jwt.strategy\");\nconst cache_module_1 = require(\"../cache/cache.module\");\nconst JWT_SECRET = {\n    provide: 'APP_JWT_SECRET',\n    imports: [config_1.ConfigModule],\n    useFactory: async (service) => {\n        const secret = await service.get(`env.jwt.secret`);\n        return secret;\n    },\n    inject: [config_1.ConfigService],\n};\nlet AuthModule = class AuthModule {\n};\nexports.AuthModule = AuthModule;\nexports.AuthModule = AuthModule = __decorate([\n    (0, common_1.Module)({\n        imports: [\n            config_1.ConfigModule,\n            cache_module_1.CacheModule,\n            jwt_1.JwtModule.registerAsync({\n                imports: [config_1.ConfigModule],\n                useFactory: async (service) => {\n                    const app = await service.get('env.appInstance');\n                    const secret = await service.get(`env.jwt.secret`);\n                    const result = await service.get(`env.jwt.${app}`);\n                    return {\n                        secret,\n                        ...(result.signOptions ? { signOptions: result.signOptions } : {}),\n                    };\n                },\n                inject: [config_1.ConfigService],\n            }),\n        ],\n        controllers: [auth_controller_1.AuthController],\n        providers: [auth_service_1.AuthService, auth_guard_1.JwtAuthGuard, JWT_SECRET, jwt_strategy_1.JwtStrategy],\n        exports: [auth_service_1.AuthService, auth_guard_1.JwtAuthGuard, JWT_SECRET, jwt_1.JwtModule],\n    })\n], AuthModule);\n//# sourceMappingURL=auth.module.js.map"]}